// Autómata celular estocástico (Modelo de crecimiento con ruido)
defineGridSize 40 40

defineNeighborhood vonNeumann

// Patrón inicial: Dos colonias que interactúan
defineLayout [
    // Colonia 1 (forma estable)
    (10,10),(10,11),(10,12),
    (11,10),        (11,12),
    (12,10),(12,11),(12,12),
    
    // Colonia 2 (estructura en crecimiento)
    (20,20),(20,21),(20,22),(20,23),
    (21,20),                (21,23),
    (22,20),                (22,23),
    (23,20),(23,21),(23,22),(23,23),
    
    // Semillas aleatorias adicionales
    (5,30),(6,30),(7,30),
    (30,5),(30,6),(30,7),
    (35,35),(36,36)
]

defineSeed 420  // Semilla fija para reproducibilidad

// Regla estocástica:
// 1. Células vivas pueden morir por sobrepoblación con cierta probabilidad
// 2. Células muertas pueden nacer con probabilidad proporcional a vecinos vivos
defineStep if self is alive
           then (if (count alive > 4)
                 then withProbability 80% become dead else become alive  // 80% de morir si hay sobrepoblación
                 else (if (count alive < 2)
                       then dead
                       else alive))
           else (withProbability ((count alive) * 0.1)  // 10% por cada vecino vivo
                  become alive 
                  else become dead)